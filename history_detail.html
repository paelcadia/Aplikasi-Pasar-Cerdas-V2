<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pasar Cerdas - Detail</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        
        /* Header Lengkung Khas Home V2 */
        .header-curve-lg {
            border-bottom-left-radius: 40px;
            border-bottom-right-radius: 40px;
        }
        
        /* Garis Putus-putus untuk Struk */
        .dashed-line {
            background-image: linear-gradient(to right, #cbd5e1 50%, rgba(255,255,255,0) 0%);
            background-position: bottom;
            background-size: 10px 1px;
            background-repeat: repeat-x;
            height: 1px;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">

    <!-- 1. HEADER BIRU (Dengan Ornamen) -->
    <div class="header-curve-lg bg-[#0060AF] pt-8 pb-28 px-6 shadow-xl relative overflow-hidden text-center text-white">
        
        <!-- Ornamen -->
        <div class="absolute top-[-30px] left-[-30px] w-40 h-40 bg-white opacity-10 rounded-full pointer-events-none"></div>
        <div class="absolute bottom-[20%] right-[-20px] w-24 h-24 bg-white opacity-10 rounded-full pointer-events-none"></div>
        
        <!-- Navigasi Atas -->
        <div class="relative z-10 flex items-center justify-between mb-6">
            <button onclick="history.back()" class="bg-white/20 hover:bg-white/30 p-2 rounded-full transition backdrop-blur-sm">
                <i class="ph-bold ph-arrow-left text-xl"></i>
            </button>
            <h1 class="text-lg font-bold">Rincian Transaksi</h1>
            <div class="w-9"></div> <!-- Spacer -->
        </div>

        <!-- Ikon Status Besar -->
        <div class="relative z-10 flex flex-col items-center">
            <div class="w-16 h-16 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center mb-3 border-2 border-white/30 shadow-inner">
                <i id="statusIcon" class="ph-fill text-3xl"></i>
            </div>
            <p id="statusText" class="font-medium text-blue-100 tracking-wide text-sm uppercase">Berhasil</p>
            <h2 id="totalAmount" class="text-4xl font-extrabold mt-2">Rp 0</h2>
        </div>
    </div>

    <!-- 2. KARTU STRUK (Floating) -->
    <main class="px-5 -mt-20 relative z-20 pb-10">
        
        <div class="bg-white rounded-3xl shadow-lg border border-slate-100 overflow-hidden">
            <!-- Bagian Atas Struk -->
            <div class="p-6">
                <div class="flex flex-col gap-4">
                    <div class="flex justify-between items-center">
                        <span class="text-gray-400 text-xs font-medium">Layanan</span>
                        <span id="trxType" class="text-gray-800 font-bold text-sm">...</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-400 text-xs font-medium">Waktu</span>
                        <span id="trxDate" class="text-gray-800 font-bold text-sm">...</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-400 text-xs font-medium">ID Transaksi</span>
                        <div class="flex items-center gap-2">
                            <span id="trxId" class="text-gray-800 font-bold text-sm">...</span>
                            <button class="text-[#0060AF] hover:text-blue-700"><i class="ph-bold ph-copy"></i></button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Garis Putus -->
            <div class="relative h-4 bg-gray-50">
                <div class="absolute top-1/2 left-4 right-4 dashed-line border-t border-dashed border-gray-300"></div>
                <!-- Lekukan Kertas (Hiasan) -->
                <div class="absolute -left-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-gray-50 rounded-full"></div>
                <div class="absolute -right-2 top-1/2 -translate-y-1/2 w-4 h-4 bg-gray-50 rounded-full"></div>
            </div>

            <!-- Bagian Bawah Struk (Rincian) -->
            <div class="p-6 bg-gray-50/50">
                <h3 class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-3">Rincian Pembayaran</h3>
                <div class="space-y-3">
                    <div class="flex justify-between text-sm">
                        <span class="text-gray-500">Nominal</span>
                        <span id="amountBasic" class="text-gray-800 font-semibold">Rp 0</span>
                    </div>
                    <div class="flex justify-between text-sm">
                        <span class="text-gray-500">Biaya Admin</span>
                        <span id="amountFee" class="text-gray-800 font-semibold">Rp 0</span>
                    </div>
                    <div class="dashed-line my-2 w-full border-t border-dashed border-gray-300"></div>
                    <div class="flex justify-between text-base">
                        <span class="text-gray-800 font-bold">Total Bayar</span>
                        <span id="amountTotal" class="text-[#0060AF] font-extrabold">Rp 0</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 3. TOMBOL AKSI -->
        <div class="mt-6 space-y-3" id="actionButtons">
            <!-- Tombol Utama -->
            <button class="w-full bg-[#0060AF] text-white font-bold py-3.5 rounded-xl shadow-lg shadow-blue-200 active:scale-[0.98] transition flex items-center justify-center gap-2">
                <i class="ph-bold ph-download-simple text-xl"></i>
                Simpan Bukti Transaksi
            </button>
            
            <!-- Tombol Sekunder -->
            <button class="w-full bg-white text-gray-600 font-bold py-3.5 rounded-xl border border-gray-200 active:scale-[0.98] transition flex items-center justify-center gap-2 hover:bg-gray-50">
                <i class="ph-bold ph-warning-circle text-xl"></i>
                Laporkan Masalah
            </button>
        </div>

    </main>

    <script>
        // --- LOGIKA DATA DUMMY ---
        const dummyData = {
            'R001': { type: 'Retribusi Kebersihan', date: '25 Nov 2025 • 10:30', id: 'INV/20251125/R001', amount: 50000, fee: 0, status: 'success' },
            'R002': { type: 'Retribusi Keamanan', date: '12 Nov 2025 • 08:15', id: 'INV/20251112/R002', amount: 30000, fee: 0, status: 'failed' },
            'L001': { type: 'Top Up Saldo', date: '20 Nov 2025 • 14:00', id: 'TOP/20251120/L001', amount: 500000, fee: 1500, status: 'success' }
        };

        // Ambil ID dari URL
        const urlParams = new URLSearchParams(window.location.search);
        const trxId = urlParams.get('id') || 'R001'; // Default ke R001 jika tidak ada ID
        const data = dummyData[trxId];

        function formatRupiah(num) {
            return 'Rp ' + num.toLocaleString('id-ID');
        }

        if (data) {
            // Isi Data ke DOM
            document.getElementById('trxType').textContent = data.type;
            document.getElementById('trxDate').textContent = data.date;
            document.getElementById('trxId').textContent = data.id;
            
            document.getElementById('amountBasic').textContent = formatRupiah(data.amount);
            document.getElementById('amountFee').textContent = formatRupiah(data.fee);
            const total = data.amount + data.fee;
            document.getElementById('amountTotal').textContent = formatRupiah(total);
            document.getElementById('totalAmount').textContent = formatRupiah(total);

            // Atur Status Visual (Ikon & Teks)
            const iconEl = document.getElementById('statusIcon');
            const textEl = document.getElementById('statusText');

            if (data.status === 'success') {
                iconEl.classList.add('ph-check', 'text-white');
                textEl.textContent = 'Transaksi Berhasil';
            } else if (data.status === 'failed') {
                iconEl.classList.add('ph-x', 'text-red-200');
                // Ubah background header jadi merah jika gagal (opsional, tapi bagus untuk UX)
                document.querySelector('.bg-\\[\\#0060AF\\]').classList.remove('bg-[#0060AF]');
                document.querySelector('.header-curve-lg').classList.add('bg-red-600');
                textEl.textContent = 'Transaksi Gagal';
            }
        }
    </script>
</body>
</html>